var e,t;"function"==typeof(e=globalThis.define)&&(t=e,e=null),function(t,o,n,r,s){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},l="function"==typeof i[r]&&i[r],a=l.cache||{},d="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function u(e,o){if(!a[e]){if(!t[e]){var n="function"==typeof i[r]&&i[r];if(!o&&n)return n(e,!0);if(l)return l(e,!0);if(d&&"string"==typeof e)return d(e);var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}f.resolve=function(o){var n=t[e][1][o];return null!=n?n:o},f.cache={};var c=a[e]=new u.Module(e);t[e][0].call(c.exports,f,c,c.exports,this)}return a[e].exports;function f(e){var t=f.resolve(e);return!1===t?{}:u(t)}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=t,u.cache=a,u.parent=l,u.register=function(e,o){t[e]=[function(e,t){t.exports=o},{}]},Object.defineProperty(u,"root",{get:function(){return i[r]}}),i[r]=u;for(var c=0;c<o.length;c++)u(o[c]);if(n){var f=u(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=f:"function"==typeof e&&e.amd?e(function(){return f}):s&&(this[s]=f)}}({"4gaGD":[function(e,t,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(o),n.export(o,"config",()=>f);var r=e("google-meeting-captions-resolver"),s=n.interopDefault(r),i=e("~utils/get-is-extension-enabled"),l=n.interopDefault(i);let a=!1,d=e=>{chrome.storage.local.set({recordedContents:e},()=>{chrome.runtime.sendMessage({type:"contentUpdated"})})},u=e=>{a&&chrome.storage.local.get("recordedContents",({recordedContents:t})=>{let o=[...t||[]],n=o.find(t=>t.session===e.session);n?n.talkContent=e.talkContent:o.push({...e,timestamp:Date.now()}),d(o)})},c=()=>{(0,l.default)().then(e=>{a=e,e&&(0,s.default)(void 0,e=>{console.log("captions",e),u(e)})})};console.log("content.ts","loaded"),chrome.runtime.onMessage.addListener((e,t,o)=>{"toggleSwitch"===e.action&&c()}),c();let f={matches:["https://meet.google.com/*"],all_frames:!0};window.huhai=u},{"google-meeting-captions-resolver":"gojR5","~utils/get-is-extension-enabled":"AYkpf","@parcel/transformer-js/src/esmodule-helpers.js":"fRZO2"}],gojR5:[function(e,t,o){let n;function r(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}Object.defineProperty(t.exports,"__esModule",{value:!0,configurable:!0}),r(t.exports,"getCaptions",()=>j),r(t.exports,"default",()=>w);let s=".uYs2ee",i=()=>document.querySelector(s),l=()=>i().childNodes?.[0]?.childNodes[0]?.textContent,a=()=>i().childNodes?.[0]?.childNodes[1],d=()=>i().childNodes?.[0]?.childNodes[1]?.textContent,u="",c={},f={sessionId:"",sessionIndex:0},p=()=>Array.prototype.slice.call(a().querySelectorAll("span")),g=e=>{p().forEach(t=>{t.hasAttribute("data-session-id")||(t.setAttribute("data-session-id",e),t.setAttribute("data-session-index",String(f.sessionIndex++)))})},m=()=>{p().forEach(e=>{let t=e.getAttribute("data-session-id"),o=e.getAttribute("data-ignored"),n=e.getAttribute("data-session-index");o||(c[t]||(c[t]=[]),c[t][n]=e.textContent)})},h=e=>{let t=c[e].join(" ");return t},b=()=>{console.log("markSpanShouldBeIgnored");let e=null,t=h(f.sessionId),o=p();o.forEach((n,r)=>{let s=o.slice(0,r+1).map(e=>e.textContent).join(" ");-1!==t.indexOf(s)&&(e=r)}),console.log("moveIndexTo",e),null!==e&&o.forEach((t,o)=>{o<=e&&t.setAttribute("data-ignored","true")})};var y,x=(y=e=>{console.warn("mutation observed");let t=d(),o=l()!==u;u=l(),t&&(o&&(f.sessionId=String(new Date().getTime()),f.sessionIndex=0,c[f.sessionId]=[]),b(),g(f.sessionId),m(),e({session:f.sessionId,activeSpeaker:u,talkContent:h(f.sessionId)}))},function(...e){clearTimeout(n),n=setTimeout(()=>{y(...e)},300)});let v=e=>{let t=document.querySelector(s);if(t){let o=new MutationObserver(()=>{console.log("mutation observed"),x(e)});o.observe(t,{childList:!0,subtree:!0,characterData:!0})}else setTimeout(()=>{v(e)},1e3)},j=(e=s,t)=>{let o=()=>{window.requestAnimationFrame(()=>{"complete"===document.readyState?(console.log("document complete"),v(t)):o()})};o()};var w=j},{}],AYkpf:[function(e,t,o){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(o),o.default=()=>new Promise((e,t)=>{chrome.storage.sync.get(["isExtensionEnabled"],t=>{e(!!t.isExtensionEnabled)})})},{"@parcel/transformer-js/src/esmodule-helpers.js":"fRZO2"}],fRZO2:[function(e,t,o){o.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},o.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.exportAll=function(e,t){return Object.keys(e).forEach(function(o){"default"===o||"__esModule"===o||t.hasOwnProperty(o)||Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[o]}})}),t},o.export=function(e,t,o){Object.defineProperty(e,t,{enumerable:!0,get:o})}},{}]},["4gaGD"],"4gaGD","parcelRequire044e"),globalThis.define=t;